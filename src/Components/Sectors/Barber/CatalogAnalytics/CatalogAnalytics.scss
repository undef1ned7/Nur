/* CatalogAnalytics.scss */
@import "../styles/barbershop.scss";

.catalog-analytics{
  display:grid; gap:16px; color:var(--ca-text);

  &__head{
    display:flex; align-items:center; justify-content:space-between; gap:12px;
  }
  &__title{
    display:inline-flex; align-items:center; gap:8px; font-size:18px; font-weight:700;
  }
  &__filters{ display:inline-flex; align-items:center; gap:8px; }

  /* KPI сетка */
  &__kpis{
    display:grid; gap:10px; grid-template-columns:repeat(auto-fit, minmax(220px,1fr));
  }

  /* карточки */
  &__grid{
    display:grid; gap:12px; grid-template-columns:repeat(3, minmax(0,1fr));
  }

  .ca-select{
    border:1px solid var(--ca-border); background:var(--ca-bg);
    padding:8px 10px; border-radius:8px; outline:none;
    &:focus{ border-color: var(--ca-accent); }
  }
  .catalog-analytics__refresh{
    border:1px solid var(--ca-border); background:var(--ca-bg);
    padding:8px 10px; border-radius:8px; cursor:pointer;
  }
}

/* KPI */
.kpi{
  background:var(--ca-bg); border:1px solid var(--ca-border); border-radius:12px;
  padding:12px; display:grid; grid-template-columns:32px 1fr auto; align-items:center; gap:10px;

  &__icon{ width:32px; height:32px; display:grid; place-items:center; background:var(--ca-accent-2); border-radius:8px; }
  &__name{ color:var(--ca-muted); font-size:12px; }
  &__val{ font-weight:700; font-variant-numeric: tabular-nums; }
}

/* Card */
.ca-card{
  background:var(--ca-bg); border:1px solid var(--ca-border); border-radius:12px;
  overflow:hidden; display:grid; grid-template-rows:auto 1fr auto;

  &__head{ display:flex; align-items:center; justify-content:space-between; padding:10px 12px; border-bottom:1px solid var(--ca-border); }
  &__title{ display:inline-flex; gap:8px; align-items:center; font-weight:600; }
  &__more{ border:0; background:transparent; cursor:pointer; padding:4px; border-radius:8px; }

  &__pager{
    display:flex; align-items:center; justify-content:center; gap:8px; padding:8px 10px;
    border-top:1px solid var(--ca-border);
  }
}

/* Scrollable table wrapper */
.ca-tableWrap{
  max-height:360px; /* скролл на карточке */
  overflow:auto;

  &--modal{ max-height:70vh; }
}

.ca-table{
  width:100%; border-collapse:collapse; font-size:14px;

  thead th{
    position:sticky; top:0; z-index:1; background:var(--ca-bg);
    text-align:left; padding:8px 10px; color:var(--ca-muted); font-weight:600;
    border-bottom:1px solid var(--ca-border);
  }
  tbody td{
    padding:8px 10px; border-bottom:1px solid var(--ca-border); vertical-align:top;
  }
}
.ca-ellipsis{ max-width:260px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.ca-money{ text-align:right; font-variant-numeric: tabular-nums; }
.ca-empty{ text-align:center; color:var(--ca-muted); padding:20px !important; }

/* Pager */
.ca-pager{
  display:inline-flex; align-items:center; gap:10px;
  &__btn{
    border:1px solid var(--ca-border); background:var(--ca-bg); padding:6px 10px; border-radius:8px; cursor:pointer;
    &:disabled{ opacity:.4; cursor:default; }
  }
  &__info{ color:var(--ca-muted); font-size:12px; }
}

/* Modal */
.ca-modal{
  position:fixed; inset:0; z-index:60; display:grid; place-items:center;
  &__overlay{ position:absolute; inset:0; background:rgba(17,24,39,.5); }
  &__card{
    position:relative; width:min(980px,96vw); background:var(--ca-bg); border:1px solid var(--ca-border);
    border-radius:12px; box-shadow:0 10px 24px rgba(0,0,0,.1);
    display:grid; grid-template-rows:auto 1fr auto; max-height:88vh;
  }
  &__head{ display:flex; align-items:center; justify-content:space-between; padding:12px 14px; border-bottom:1px solid var(--ca-border); }
  &__title{ font-weight:700; }
  &__icon{ border:0; background:transparent; cursor:pointer; padding:4px; }
  &__body{ padding:10px 12px; }
  &__footer{ padding:10px 12px; border-top:1px solid var(--ca-border); display:flex; justify-content:center; }
}

/* Адаптив */
@media (max-width:1080px){
  .catalog-analytics__grid{ grid-template-columns:repeat(2, minmax(0,1fr)); }
}
@media (max-width:720px){
  .catalog-analytics__kpis,
  .catalog-analytics__grid{ grid-template-columns:1fr; }
}
